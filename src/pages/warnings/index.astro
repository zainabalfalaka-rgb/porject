---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import StarRating from '../../components/StarRating.astro';

const schemaData = {
  "@type": "CollectionPage",
  "name": "تحذيرات من الشركات المشبوهة",
  "description": "قائمة شاملة بالشركات المشبوهة والمحتالة في منطقة الخليج",
  "url": "https://khalijtrust.com/warnings/"
};

// Sample warnings data
const warnings = [
  {
    id: 1,
    title: "شركة أبيان المالية Abyan Capital - احتيال استثماري",
    company: "أبيان المالية",
    rating: 0.5,
    type: "شركة استثمار وهمية",
    description: "شركة استثمار وهمية تستخدم نظام تدوير الأموال والمخططات الهرمية. تدعي تحقيق أرباح تصل إلى 100% وتستخدم فتاوى مضللة.",
    reportedAmount: "غير محدد",
    reportsCount: 45,
    slug: "abyan-capital-scam",
    tags: ["استثمار", "تدوير أموال", "مخطط هرمي"],
    lastUpdated: "2024-01-15"
  },
  {
    id: 2,
    title: "شركة التداول WRPro - منصة تداول احتيالية",
    company: "WRPro Trading",
    rating: 0,
    type: "منصة تداول احتيالية",
    description: "منصة تداول احتيالية تستخدم أساليب ذكية لخداع المتداولين مع وعود كاذبة بأرباح مرتفعة ثم تسرق أموالهم.",
    reportedAmount: "200,000 دولار (حالة واحدة)",
    reportsCount: 67,
    slug: "wrpro-scam",
    tags: ["تداول", "فوركس", "منع السحب"],
    lastUpdated: "2024-01-10"
  },
  {
    id: 3,
    title: "شركة إيفيست Evest - وسيط تداول مشبوه",
    company: "Evest",
    rating: 1,
    type: "وسيط تداول مشبوه",
    description: "شركة تداول تواجه شكاوى متزايدة حول تأخير السحب والتضليل وعدم وجود تراخيص قوية من هيئات رقابية موثوقة.",
    reportedAmount: "متنوع",
    reportsCount: 89,
    slug: "evest-scam",
    tags: ["تداول", "تأخير سحب", "ترخيص ضعيف"],
    lastUpdated: "2024-01-12"
  },
  {
    id: 4,
    title: "شركة اكسيا Axia - شركة تداول احتيالية",
    company: "Axia Trading",
    rating: 0,
    type: "شركة تداول احتيالية",
    description: "شركة تداول احتيالية تمارس النصب المنظم من خلال التلاعب في الصفقات ورفض السحب وادعاءات كاذبة حول التراخيص.",
    reportedAmount: "متنوع",
    reportsCount: 134,
    slug: "axia-scam",
    tags: ["تداول", "تلاعب صفقات", "رفض سحب"],
    lastUpdated: "2024-01-08"
  },
  {
    id: 5,
    title: "شركة CSOP - منصة تداول احتيالية",
    company: "CSOP",
    rating: 0,
    type: "منصة تداول احتيالية",
    description: "شركة غير مرخصة تستخدم التسويق الهرمي والتلاعب في المنصة لسرقة أموال المتداولين",
    reportedAmount: "25,000 دولار (حالة واحدة)",
    reportsCount: 78,
    slug: "csop-scam",
    tags: ["تداول", "تسويق هرمي", "منصة مزيفة"],
    lastUpdated: "2024-01-15"
  },
  {
    id: 6,
    title: "شركة زينستوكس Zenstox - وسيط تداول مشبوه",
    company: "Zenstox",
    rating: 1.5,
    type: "وسيط تداول مشبوه",
    description: "شركة ناشئة تواجه اتهامات بالنصب مع مشاكل في السحب ورسوم مرتفعة وعدم شفافية في التراخيص",
    reportedAmount: "متنوع",
    reportsCount: 56,
    slug: "zenstox-scam",
    tags: ["تداول", "رسوم مرتفعة", "مشاكل سحب"],
    lastUpdated: "2024-01-15"
  },
  {
    id: 7,
    title: "شركة إنفستيكو Investico - شركة تداول احتيالية",
    company: "Investico Education",
    rating: 0,
    type: "شركة تداول احتيالية",
    description: "شركة احتيالية تستخدم تراخيص مزيفة والتلاعب في الأسعار لسرقة أموال المتداولين",
    reportedAmount: "متنوع",
    reportsCount: 92,
    slug: "investico-scam",
    tags: ["تداول", "تراخيص مزيفة", "تلاعب أسعار"],
    lastUpdated: "2024-01-15"
  },
  {
  id: 8,
  title: "شركة تريد جلوبال TradeEU Global - شركة تداول احتيالية",
  company: "TradeEU Global",
  rating: 0,
  type: "شركة تداول احتيالية",
  description: "شركة تداول نصابة تمارس النصب المنظم من خلال وعود كاذبة، تراخيص مشبوهة، والتلاعب في أموال العملاء مع رفض طلبات السحب",
  reportedAmount: "متنوع",
  reportsCount: 137,
  slug: "tradee-u-global-scam",
  tags: ["تداول", "احتيالية", "تراخيص مشبوهة", "رفض سحب", "خداع"],
  lastUpdated: "2025-09-02"
}

];

const warningTypes = [
  { value: "all", label: "جميع الأنواع" },
  { value: "investment", label: "شركات الاستثمار" },
  { value: "trading", label: "منصات التداول" },
  { value: "legal", label: "مكاتب المحاماة الوهمية" },
  { value: "crypto", label: "العملات الرقمية" },
  { value: "real-estate", label: "العقارات" }
];
---

<Layout 
  title="تحذيرات من الشركات المشبوهة - دليل الخليج"
  description="قائمة شاملة بالشركات المشبوهة والمحتالة في منطقة الخليج مع التفاصيل الكاملة وتقييمات المستخدمين"
  keywords="احتيال، نصب، شركات مشبوهة، تحذيرات، الخليج، استثمار وهمي، تداول احتيالي"
  schemaData={schemaData}
>
  <Header />
  
  <main>
    <!-- Page Header -->
    <section class="page-header">
      <div class="container">
        <div class="header-content">
          <h1 class="page-title">
            <span class="title-icon">⚠️</span>
            تحذيرات من الشركات المشبوهة
          </h1>
          <p class="page-description">
            قائمة محدثة بالشركات والمؤسسات المشبوهة والمحتالة في منطقة الخليج. 
            ساعد الآخرين بتجنب الوقوع في الفخ وحماية أموالهم.
          </p>
          
          <div class="warning-stats">
            <div class="stat-item">
              <span class="stat-number">{warnings.length}</span>
              <span class="stat-label">شركة محتالة</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">{warnings.reduce((sum, w) => sum + w.reportsCount, 0)}</span>
              <span class="stat-label">بلاغ احتيال</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">15.5M</span>
              <span class="stat-label">درهم مسروق</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Filters Section -->
    <section class="filters-section">
      <div class="container">
        <div class="filters-container">
          <div class="filter-group">
            <label for="typeFilter" class="filter-label">نوع الشركة:</label>
            <select id="typeFilter" class="filter-select">
              {warningTypes.map(type => (
                <option value={type.value}>{type.label}</option>
              ))}
            </select>
          </div>
          
          <div class="filter-group">
            <label for="sortFilter" class="filter-label">ترتيب حسب:</label>
            <select id="sortFilter" class="filter-select">
              <option value="recent">الأحدث</option>
              <option value="reports">عدد البلاغات</option>
              <option value="amount">المبلغ المسروق</option>
              <option value="rating">التقييم</option>
            </select>
          </div>
          
          <button class="report-btn" onclick="window.location.href='/report/'">
            <span class="btn-icon">📝</span>
            بلغ عن شركة مشبوهة
          </button>
        </div>
      </div>
    </section>

    <!-- Warnings List -->
    <section class="warnings-section">
      <div class="container">
        <div class="warnings-grid-cards">
          {warnings.map(warning => (
            <article class="warning-card-compact">
              <div class="card-header">
                <div class="warning-info">
                  <h2 class="warning-title">
                    <a href={`/warnings/${warning.slug}/`}>{warning.company}</a>
                  </h2>
                  <p class="warning-type-badge">{warning.type}</p>
                </div>
                <div class="warning-rating">
                  <StarRating rating={warning.rating} size="small" />
                </div>
              </div>
              
              <div class="card-body">
                <p class="warning-description-short">{warning.description.substring(0, 120)}...</p>
                
                <div class="warning-stats-compact">
                  <div class="stat">
                    <span class="stat-icon">📊</span>
                    <span class="stat-text">{warning.reportsCount} بلاغ</span>
                  </div>
                  <div class="stat">
                    <span class="stat-icon">⚠️</span>
                    <span class="stat-text">خطر شديد</span>
                  </div>
                </div>
                
                <div class="warning-tags">
                  {warning.tags.map(tag => (
                    <span class="tag">{tag}</span>
                  ))}
                </div>
              </div>
              
              <div class="card-footer">
                <a href={`/warnings/${warning.slug}/`} class="read-more-btn">
                  قراءة التفاصيل ←
                </a>
              </div>
            </article>
          ))}
        </div>
        
        <!-- Load More Button -->
        <div class="load-more-section">
          <button class="btn btn-outline load-more-btn">
            عرض المزيد من التحذيرات
          </button>
        </div>
      </div>
    </section>

    <!-- Emergency Contact -->
    <section class="emergency-contact">
      <div class="container">
        <div class="contact-card">
          <div class="contact-icon">🚨</div>
          <div class="contact-content">
            <h3>هل تعرضت للاحتيال؟</h3>
            <p>تواصل معنا فوراً للحصول على المساعدة والإرشاد القانوني</p>
            <div class="contact-actions">
              <a href="https://wa.me/97145109509" class="btn btn-secondary" target="_blank">
                تواصل عبر واتساب
              </a>
              <a href="/lawyers/" class="btn btn-outline">
                ابحث عن محامي
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Filter functionality
    const typeFilter = document.getElementById('typeFilter');
    const sortFilter = document.getElementById('sortFilter');
    
    function applyFilters() {
      // This would typically involve AJAX calls to filter the data
      console.log('Applying filters:', {
        type: typeFilter?.value,
        sort: sortFilter?.value
      });
    }
    
    typeFilter?.addEventListener('change', applyFilters);
    sortFilter?.addEventListener('change', applyFilters);
    
    // Share functionality
    const shareButtons = document.querySelectorAll('.share-btn');
    shareButtons.forEach(button => {
      button.addEventListener('click', async function() {
        const title = this.dataset.title;
        const url = window.location.href;
        
        if (navigator.share) {
          try {
            await navigator.share({
              title: `تحذير: ${title}`,
              text: 'احذر من هذه الشركة المشبوهة',
              url: url
            });
          } catch (error) {
            // Handle permission denied, user cancellation, or other errors
            if (error.name === 'NotAllowedError' || error.name === 'AbortError') {
              // Fall back to clipboard
              navigator.clipboard.writeText(`تحذير: ${title} - ${url}`);
              
              const originalText = this.textContent;
              this.textContent = 'تم النسخ!';
              setTimeout(() => {
                this.textContent = originalText;
              }, 2000);
            }
          }
        } else {
          // Fallback to clipboard
          navigator.clipboard.writeText(`تحذير: ${title} - ${url}`);
          
          // Show feedback
          const originalText = this.textContent;
          this.textContent = 'تم النسخ!';
          setTimeout(() => {
            this.textContent = originalText;
          }, 2000);
        }
      });
    });
    
    // Load more functionality
    const loadMoreBtn = document.querySelector('.load-more-btn');
    loadMoreBtn?.addEventListener('click', function() {
      // This would load more warnings via AJAX
      this.textContent = 'جاري التحميل...';
      this.disabled = true;
      
      setTimeout(() => {
        this.textContent = 'عرض المزيد من التحذيرات';
        this.disabled = false;
      }, 1000);
    });
  });
</script>

<style>
  .page-header {
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    color: white;
    padding: var(--space-16) 0;
    position: relative;
    overflow: hidden;
  }

  .page-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="rgba(255,255,255,0.05)" points="0,1000 1000,800 1000,1000"/></svg>');
    background-size: cover;
  }

  .header-content {
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .page-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-4);
    font-size: 3rem;
    margin-bottom: var(--space-6);
    color: white;
  }

  .title-icon {
    font-size: 3.5rem;
  }

  .page-description {
    font-size: 1.25rem;
    line-height: var(--line-height-relaxed);
    color: rgba(255, 255, 255, 0.9);
    max-width: 800px;
    margin: 0 auto var(--space-8);
  }

  .warning-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-6);
    max-width: 600px;
    margin: 0 auto;
  }

  .stat-item {
    text-align: center;
    padding: var(--space-4);
    background: rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-lg);
    backdrop-filter: blur(10px);
  }

  .stat-number {
    display: block;
    font-size: 2rem;
    font-weight: var(--font-weight-bold);
    color: var(--color-secondary-light);
    margin-bottom: var(--space-1);
  }

  .stat-label {
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.8);
  }

  .filters-section {
    background: var(--color-neutral-50);
    padding: var(--space-8) 0;
    border-bottom: 1px solid var(--color-neutral-200);
  }

  .filters-container {
    display: flex;
    align-items: center;
    gap: var(--space-8);
    flex-wrap: wrap;
  }

  .filter-group {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  .filter-label {
    font-weight: var(--font-weight-semibold);
    color: var(--color-neutral-700);
    white-space: nowrap;
  }

  .filter-select {
    padding: var(--space-2) var(--space-4);
    border: 2px solid var(--color-neutral-200);
    border-radius: var(--radius-md);
    background: white;
    font-family: inherit;
    font-size: 1rem;
    min-width: 180px;
    transition: border-color 0.2s ease;
  }

  .filter-select:focus {
    outline: none;
    border-color: var(--color-primary);
  }

  .report-btn {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-6);
    background: var(--color-secondary);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: all 0.2s ease;
    margin-right: auto;
  }

  .report-btn:hover {
    background: var(--color-secondary-dark);
    transform: translateY(-2px);
  }

  .btn-icon {
    font-size: 1.2rem;
  }

  .warnings-section {
    padding: var(--space-16) 0;
  }

  .warnings-grid-cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-8);
  }

  .warning-card-compact {
    background: white;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    transition: all 0.3s ease;
    border: 2px solid var(--color-neutral-100);
    height: 280px;
    display: flex;
    flex-direction: column;
  }

  .warning-card-compact:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
    border-color: #dc2626;
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: var(--space-4);
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    color: white;
    min-height: 80px;
  }

  .warning-info {
    flex: 1;
  }

  .warning-title {
    font-size: 1.125rem;
    margin-bottom: var(--space-2);
    line-height: 1.3;
  }

  .warning-title a {
    color: white;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .warning-title a:hover {
    color: var(--color-secondary-light);
  }

  .warning-type-badge {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: var(--font-weight-bold);
    backdrop-filter: blur(10px);
    margin: 0;
  }

  .warning-rating {
    flex-shrink: 0;
  }

  .card-body {
    padding: var(--space-4);
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .warning-description-short {
    color: var(--color-neutral-600);
    line-height: var(--line-height-relaxed);
    margin-bottom: var(--space-4);
    font-size: 0.875rem;
    flex: 1;
  }

  .warning-stats-compact {
    display: flex;
    gap: var(--space-4);
    margin-bottom: var(--space-4);
  }

  .warning-stats-compact .stat {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    background: var(--color-neutral-50);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    flex: 1;
  }

  .stat-icon {
    font-size: 0.875rem;
  }

  .stat-text {
    font-size: 0.75rem;
    color: var(--color-neutral-600);
    font-weight: var(--font-weight-semibold);
  }

  .warning-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-1);
    margin-bottom: var(--space-4);
  }

  .tag {
    background: var(--color-primary);
    color: white;
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-sm);
    font-size: 0.625rem;
    font-weight: var(--font-weight-semibold);
  }

  .card-footer {
    padding: var(--space-4);
    background: var(--color-neutral-50);
    border-top: 1px solid var(--color-neutral-100);
    margin-top: auto;
  }

  .read-more-btn {
    color: #dc2626;
    font-weight: var(--font-weight-semibold);
    text-decoration: none;
    font-size: 0.875rem;
    transition: color 0.2s ease;
    display: block;
    text-align: center;
  }

  .read-more-btn:hover {
    color: #b91c1c;
  }

  @media (max-width: 768px) {
    .warnings-grid-cards {
      grid-template-columns: 1fr;
      gap: var(--space-4);
    }

    .warning-card-compact {
      height: auto;
      min-height: 240px;
    }

    .card-header {
      min-height: 70px;
    }

    .warning-title {
      font-size: 1rem;
    }
  }

  @media (max-width: 480px) {
    .warning-card-compact {
      min-height: 220px;
    }

    .card-header {
      padding: var(--space-3);
      min-height: 60px;
    }

    .warning-title {
      font-size: 0.9rem;
    }

    .warning-description-short {
      font-size: 0.8rem;
    }
  }

  .last-updated {
    font-size: 0.875rem;
    color: var(--color-neutral-500);
  }

  .footer-actions {
    display: flex;
    gap: var(--space-3);
  }

  .btn-sm {
    padding: var(--space-2) var(--space-4);
    font-size: 0.875rem;
  }

  .load-more-section {
    text-align: center;
    margin-top: var(--space-12);
  }

  .emergency-contact {
    background: linear-gradient(135deg, var(--color-error) 0%, #dc2626 100%);
    color: white;
    padding: var(--space-16) 0;
  }

  .contact-card {
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-xl);
    padding: var(--space-10);
    text-align: center;
    backdrop-filter: blur(20px);
    border: 2px solid rgba(255, 255, 255, 0.2);
  }

  .contact-icon {
    font-size: 4rem;
    margin-bottom: var(--space-6);
  }

  .contact-content h3 {
    font-size: 2rem;
    margin-bottom: var(--space-4);
    color: white;
  }

  .contact-content p {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: var(--space-8);
  }

  .contact-actions {
    display: flex;
    gap: var(--space-4);
    justify-content: center;
    align-items: center;
  }

  .emergency-contact .btn-outline {
    border-color: white;
    color: white;
  }

  .emergency-contact .btn-outline:hover {
    background: white;
    color: #dc2626;
  }

  @media (max-width: 768px) {
    .page-title {
      font-size: 2rem;
      flex-direction: column;
      gap: var(--space-2);
    }

    .title-icon {
      font-size: 3rem;
    }

    .warning-stats {
      grid-template-columns: 1fr;
      gap: var(--space-4);
    }

    .filters-container {
      flex-direction: column;
      align-items: stretch;
      gap: var(--space-4);
    }

    .filter-group {
      justify-content: space-between;
    }

    .filter-select {
      min-width: auto;
      flex: 1;
    }

    .report-btn {
      margin-right: 0;
      justify-content: center;
    }

    .warning-stats {
      grid-template-columns: 1fr;
    }

    .card-footer {
      flex-direction: column;
      align-items: stretch;
      gap: var(--space-4);
    }

    .footer-actions {
      justify-content: center;
    }

    .contact-actions {
      flex-direction: column;
      gap: var(--space-3);
    }

    .contact-actions .btn {
      width: 100%;
    }
  }
</style>